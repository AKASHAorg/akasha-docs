"use strict";(self.webpackChunkakasha_docs=self.webpackChunkakasha_docs||[]).push([[96549],{18564:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>d});var i=t(74848),s=t(28453);const r={sidebar_position:3,sidebar_label:"Extensions"},o="Extensions Overview",a={id:"extensions/index",title:"Extensions Overview",description:"The functionality of a world is split into multiple individual, semi-independent micro-apps (micro-frontends) that are developed by independent teams and submitted to the AKASHA Core's integration registry.",source:"@site/docs/extensions/index.md",sourceDirName:"extensions",slug:"/extensions/",permalink:"/extensions/",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedAt:1719832236e3,sidebarPosition:3,frontMatter:{sidebar_position:3,sidebar_label:"Extensions"},sidebar:"defaultSidebar",previous:{title:"Glossary",permalink:"/glossary"},next:{title:"Applications",permalink:"/extensions/applications"}},l={},d=[{value:"What can an extension do?",id:"what-can-an-extension-do",level:3},{value:"What&#39;s the difference between Apps, Widget, ContentBlock, etc?",id:"whats-the-difference-between-apps-widget-contentblock-etc",level:3},{value:"How it works",id:"how-it-works",level:2},{value:"The Registration part",id:"the-registration-part",level:3},{value:"The Bootstrapping, Mounting and Unmounting part",id:"the-bootstrapping-mounting-and-unmounting-part",level:3},{value:"Routing",id:"routing",level:3},{value:"The Installing and Uninstalling part",id:"the-installing-and-uninstalling-part",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"extensions-overview",children:"Extensions Overview"}),"\n",(0,i.jsxs)(n.p,{children:["The functionality of a world is split into multiple individual, semi-independent micro-apps (",(0,i.jsx)(n.a,{href:"https://micro-frontends.org/",children:"micro-frontends"}),") that are developed by independent teams and submitted to the AKASHA Core's integration registry."]}),"\n",(0,i.jsxs)(n.p,{children:["Extensions are available in the ",(0,i.jsx)(n.strong,{children:"Extensions App"}),", a digital distribution service or marketplace that allows Ethereans to browse and manage them (install, uninstall, activate or deactivate)."]}),"\n",(0,i.jsx)(n.p,{children:"We believe that these extensions done by and for the Ethereum community will greatly impact how humans interact, create and exchange information. You can contribute and bring your ideas in Akasha World by creating as many extensions as you want, publishing them in the Extensions App and making them available to a growing community of users."}),"\n",(0,i.jsx)(n.h3,{id:"what-can-an-extension-do",children:"What can an extension do?"}),"\n",(0,i.jsx)(n.p,{children:"Good examples, though not yet available, could be:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["an ",(0,i.jsx)(n.strong,{children:"Events"})," App - using ",(0,i.jsx)(n.a,{href:"/extensions/applications",children:"Apps"})]}),"\n",(0,i.jsxs)(n.li,{children:["an ",(0,i.jsx)(n.strong,{children:"Activity Overview"})," Widget - using ",(0,i.jsx)(n.a,{href:"/extensions/widgets",children:"Widgets"})]}),"\n",(0,i.jsxs)(n.li,{children:["upvoting or downvoting a comment - using ",(0,i.jsx)(n.a,{href:"/extensions/extension_points",children:"ExtensionPoints"})]}),"\n",(0,i.jsxs)(n.li,{children:["turning a post into an NFT - using ",(0,i.jsx)(n.a,{href:"/extensions/content_blocks",children:"ContentBlocks"})]}),"\n",(0,i.jsxs)(n.li,{children:["an API to a 3rd party service - using ",(0,i.jsx)(n.a,{href:"/extensions/plugins",children:"Plugins"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"So, there are multiple ways in which you can enrich the functionality of a world"}),"\n",(0,i.jsx)(n.h3,{id:"whats-the-difference-between-apps-widget-contentblock-etc",children:"What's the difference between Apps, Widget, ContentBlock, etc?"}),"\n",(0,i.jsx)(n.p,{children:"Here is a table with main differences between different types of extensions"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{}),(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"Apps"}),(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"Widgets"}),(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"ExtensionPoints"}),(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"ContentBlocks"}),(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"Plugins"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Installable"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"yes"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"yes"}),(0,i.jsxs)(n.td,{style:{textAlign:"center"},children:["no",(0,i.jsx)("sup",{children:"1"})]}),(0,i.jsxs)(n.td,{style:{textAlign:"center"},children:["no",(0,i.jsx)("sup",{children:"1"})]}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"yes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Can have subroutes"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"yes"}),(0,i.jsxs)(n.td,{style:{textAlign:"center"},children:["no",(0,i.jsx)("sup",{children:"2"})]}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"no"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"no"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"no"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Always shown/loaded"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"no"}),(0,i.jsxs)(n.td,{style:{textAlign:"center"},children:["yes",(0,i.jsx)("sup",{children:"3"})]}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"no"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"no"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"yes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Shown/usable in the editor"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"no"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"no"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"no"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"yes"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"yes"})]})]})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)("sup",{children:"1"})," They are 'provided' by the Apps"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)("sup",{children:"2"})," It can react to a route change (changing the view based on current route)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)("sup",{children:"3"})," Not visible on mobile view. You can also choose to display it on certain pages/routes"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"how-it-works",children:"How it works"}),"\n",(0,i.jsx)(n.p,{children:"Extensions are packed individually as javascript modules and loaded at runtime based on the current route.\nThis global routing is handled automatically by the underlying single-spa library which ensures that on every route change an activityFunction is called and in case that it no longer matches (in other words returns false) it will unmount the extension and mount another one if necessary."}),"\n",(0,i.jsxs)(n.p,{children:["In the case of apps, this matching function internally called by the ",(0,i.jsx)(n.a,{href:"https://github.com/AKASHAorg/akasha-core/tree/next/libs/app-loader",children:"AppLoader"})," library which is a wrapper over the single-spa.\nIn the case of widgets, this matching function can be provided by the config of the widget - if there is a need for a contextual widget\nFor example, the ",(0,i.jsx)(n.a,{href:"https://github.com/AKASHAorg/akasha-core/blob/next/extensions/widgets/mini-profile/src/index.ts",children:"MiniProfileWidget"})," config contains the ",(0,i.jsx)(n.code,{children:"activeWhen"})," property to control the route on which this widget should mount."]}),"\n",(0,i.jsxs)(n.p,{children:["Extensions - which are packed as javascript modules - have to be served from a webserver (or a gateway in case of the IPFS network) and later fetched and imported by the AppLoader (more specifically using ",(0,i.jsx)(n.a,{href:"https://github.com/systemjs/systemjs",children:"SystemJS"})," dynamic module loader)."]}),"\n",(0,i.jsx)(n.h3,{id:"the-registration-part",children:"The Registration part"}),"\n",(0,i.jsxs)(n.p,{children:["Before rendering the extensions into the view we need first to get information about what, where and when to render them.\nTo do this, all extensions must export a function called ",(0,i.jsx)(n.code,{children:"register"})," which will be called by the AppLoader and the configuration object returned from that function will be stored (in memory) for the lifetime of the session."]}),"\n",(0,i.jsx)(n.p,{children:"After the registration function is called and the config object is retrieved, the AppLoader will prepare the rest of the steps:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"register extension into the single-spa"}),"\n",(0,i.jsx)(n.li,{children:"register the menuItems - which can later be consumed by the extensions"}),"\n",(0,i.jsx)(n.li,{children:"register the content-blocks - if provided"}),"\n",(0,i.jsx)(n.li,{children:"register the extension-points - if provided"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"the-bootstrapping-mounting-and-unmounting-part",children:"The Bootstrapping, Mounting and Unmounting part"}),"\n",(0,i.jsxs)(n.p,{children:["The lifecycles functions through which single-spa library handles the registered extensions is documented ",(0,i.jsx)(n.a,{href:"https://single-spa.js.org/docs/building-applications#registered-application-lifecycle",children:"here"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["TL;DR is that the single-spa also provides framework-specific adapter libraries and for React there is a helper library called ",(0,i.jsx)(n.a,{href:"https://single-spa.js.org/docs/ecosystem-react",children:"single-spa-react"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Using this helper library we can wrap the root component of the extension and export the lifecycles. The required lifecycle functions are ",(0,i.jsx)(n.code,{children:"bootstrap"}),", ",(0,i.jsx)(n.code,{children:"mount"})," and ",(0,i.jsx)(n.code,{children:"unmount"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["These lifecycles must be provided to the AppLoader via the config object's ",(0,i.jsx)(n.code,{children:"loadingFn"})," property which is an async function that dynamically imports the lifecycles."]}),"\n",(0,i.jsx)(n.p,{children:"For example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",metastring:'title="MyRootReactComponent.tsx"',children:"import * as React from 'react';\nimport ReactDOMClient from 'react-doc/client';\n\nconst MyRootComponent = () => {\n  return <div>Hello World</div>\n}\n\nconst lifecycles = singleSpaReact({\n  React, // required\n  ReactDOMClient, // required\n  rootComponent: MyRootComponent // required\n  errorBoundary(err, errInfo, props) {\n    return (\n      <div>\n        Something went terribly wrong and this error boundary\n        saved the entire World from a crash\n      </div>\n    )\n  }\n});\n\n// there 3 lifecycle functions are required\nexport const bootstrap = lifecycles.bootstrap;\nexport const mount = lifecycles.mount;\nexport const unmount = lifecycles.unmount;\n"})}),"\n",(0,i.jsxs)(n.p,{children:["For additional singleSpaReact options please visit ",(0,i.jsx)(n.a,{href:"https://single-spa.js.org/docs/ecosystem-react#options",children:"single-spa-react options"})," page."]}),"\n",(0,i.jsxs)(n.p,{children:["then in the config object - which is returned from the registration function the ",(0,i.jsx)(n.code,{children:"loadingFn"})," property should import the file:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",metastring:'title="index.ts"',children:"\nexport function register() {\n  return {\n    // the configuration object\n    // ... other config options\n    loadingFn: () => import ('./myRootReactComponent')\n  }\n}\n\n"})}),"\n",(0,i.jsx)(n.p,{children:"This allows the sigle-spa library to only load the source code of the extension when first requested and avoid downloading all\nthe source-code of extensions upfront (code-splitting) while keeping the entry file (the file that exports the registration function) as small as possible."}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsx)(n.p,{children:"This pattern is used for almost all of the dynamic entities such as apps, widgets, content-blocks and extension-points"})}),"\n",(0,i.jsx)(n.h3,{id:"routing",children:"Routing"}),"\n",(0,i.jsxs)(n.p,{children:["Besides the routing provided by the single-spa, extensions can also have an 'internal' routing using the library of choice. For example, the extensions that are developed by AKASHA are using ",(0,i.jsx)(n.a,{href:"https://tanstack.com/router/latest",children:"TanStack Router"}),";"]}),"\n",(0,i.jsxs)(n.p,{children:["For example, when navigating to ",(0,i.jsx)(n.a,{href:"https://localhost:8131/@akashaorg/app-antenna/antenna",children:"https://localhost:8131/@akashaorg/app-antenna/antenna"})," the following apps and widgets will be loaded:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"URL: 'https://localhost:8131/[ApplicationName]/[Subroute]'\nApplicationName: '@akashaorg/app-antenna' -> routing handled by single-spa\n  Subroute: 'antenna' -> this will be handled by the internal router\n\nWidgets:\n  - '@akashaorg/ui-widget-layout' // the layout\n  - '@akashaorg/ui-widget-sidebar' // the sidebar\n  - '@akashaorg/ui-widget-topbar' // the topbar\n  - ... other widgets that matches the route\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsx)(n.p,{children:"It is highly recommended to only have an internal router for apps. Widgets are considered to be always mounted and not to change their content based on the route."})}),"\n",(0,i.jsx)(n.h3,{id:"the-installing-and-uninstalling-part",children:"The Installing and Uninstalling part"}),"\n",(0,i.jsxs)(n.p,{children:["The extensions can be discovered, installed and uninstalled in the ",(0,i.jsx)(n.a,{href:"https://github.com/AKASHAorg/akasha-core/tree/next/extensions/apps/extensions",children:"Extensions App"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["The installation process for extensions begins with the ",(0,i.jsx)(n.a,{href:"/composedb-models/types/interfaces/akasha-app-release-interface",children:"app release model"}),", which includes a sources field specifying the locations (URLs or file paths) from where the extension scripts should be loaded."]}),"\n",(0,i.jsx)(n.p,{children:"The AppLoader will import the sources and then proceed to the registration part."}),"\n",(0,i.jsx)(n.p,{children:"The release info will be also saved client-side using the IndexedDB api."}),"\n",(0,i.jsx)(n.p,{children:"In the uninstallation process, the app-loader unloads the application and the entry of the release info is removed from IndexedDB."})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var i=t(96540);const s={},r=i.createContext(s);function o(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);