# Apollo Hooks
This section provides in-depth information on the hooks for Apollo mutations and queries automatically generated by the GraphQL CodeGen tool.

## Mutations
Mutations are often used to interact with the GraphQL API resulting to changes (creating / updating) to the underlying model's data.
When initializing a mutation hook, it is important to pass to it a `context` which provides a different network endpoint needed by the mutations. Calling a mutation returns a tuple that includes:
- A `mutate` function that you can call at any time to execute the mutation.
- An object with fields that represent the current status of the mutation's execution.
_________
### useCreateAppMutation
Create an application with **useCreateAppMutation**

> This hook provides the mutation function to create the underlying model's data. It is helpful in creating robust applications.

**Example usage**
```jsx
import { useCreateAppMutation } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const sdk = getSDK();
const [createApp, { data, error, loading }] = useCreateAppMutation(
  {
    context: {
      source: sdk.services.gql.contextSources.composeDB
    },
  }
);

const handleCreateApp = () => {
  // call the mutation function
  createApp({
    variables: {
      i: {
        content: {
          name: 'appId',
          license: 'License',
          applicationType: 'APP',
          displayName: 'AmazingApp',
          description: 'this is an amazing app',
          createdAt: new Date().toISOString(),
        }
      }
    },
    onError, // fn to be called if the mutation fails
    OnCompleted, // fn to be called when the mutation completes execution
    ...
  }).then(resp => {
    // handle response data here
  }).catch(err => {
    // handle error message here
  })
}
```
_________
### useCreateBeamMutation
Create a beam with **useCreateBeamMutation**

> This hook provides the mutation function to create the underlying model's data. It is helpful in creating beams during the blocks publishing process of the editor. These beams can then be viewed in an antenna app or any other list app curating beams.

**Example usage**
```jsx
import { useCreateBeamMutation } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const sdk = getSDK();
const [createBeam, { data, error, loading }] = useCreateBeamMutation(
  {
    context: {
      source: sdk.services.gql.contextSources.composeDB
    },
  }
);

const handleCreateBeam = () => {
  const tagLabelType = sdk.services.gql.labelTypes.TAG;
  createBeam({
    variables: {
      i: {
        content: {
          nsfw: false,
          active: true,
          content: [
            {
              blockID: 'blockID',
              order: 1
            }
          ],
          tags: [
            {
              labelType: tagLabelType
              value: 'akasha'
            },
            {
              labelType: tagLabelType
              value: 'world'
            },
          ],
          createdAt: new Date().toISOString(),
        }
      }
    },
    onError,
    OnCompleted,
    ...
  }).then(
    // ...
  ).catch(
    // ...
  )
}
```
_________
### useCreateContentBlockMutation
Create a [content block](../../../extensions/editor/content_blocks.md) with **useCreateContentBlockMutation**

> This hook provides the mutation function to create the underlying model's data. It is helpful in creating content blocks during the blocks publishing process of the editor.

**Example usage**
```jsx
import { useCreateContentBlockMutation } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const [createContentBlock, { data, error, loading }] = useCreateContentBlockMutation(
  {
    context: {
      source: sdk.services.gql.contextSources.composeDB
    },
  }
);

const handleCreateContentBlock = () => {
  createContentBlock({
    variables: {
      i: {
        content: {
          nsfw: false,
          active: true,
          appVersionID: 'k2t6wzhkhabz3aut9p2mhjzp80hzo7bee18l1pt94syakfbfcj7phve27kiwwp',
          content: [{
            label: 'appName',
            propertyType: 'propertyType'
            value: 'content'
          }],
          kind: 'TEXT',
          createdAt: new Date().toISOString(),
        }
      }
    },
    onError,
    OnCompleted,
    ...
  }).then(
    // ...
  ).catch(
    // ...
  )
}
```
_________
### useCreateFollowMutation
Create a follow document to a profile with **useCreateFollowMutation**

> This hook provides the mutation function to create the underlying model's data. It is helpful in keeping track of a profile's followers or following data.
The mutation is called only when there is no existing follow document id for the profile. If it exists, [useUpdateFollowMutation](#useupdatefollowmutation) should be used instead.

**Example usage**
```jsx
import { useCreateFollowMutation } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const sdk = getSDK();
const [createFollow, { data, error, loading }] = useCreateFollowMutation(
  {
    context: {
      source: sdk.services.gql.contextSources.composeDB
    },
  }
);

/**
 * use this mutation,
 * only when there is no follow document id.
*/
const followId = null;

const handleCreateFollow = () => {
  if (!followId) {
    createFollow({
    variables: {
      i: {
        content: {
          isFollowing: true,
          profileID: 'did:pkh:eip155:11155111:0x2c953cd8d24004406570840a'
          createdAt: new Date().toISOString(),
        }
      }
    },
    onError,
    OnCompleted,
    ...
  }).then(
    // ...
  ).catch(
    // ...
  )
  }
}
```
_________
### useCreateInterestsMutation
Create an interest or list of interests with **useCreateInterestsMutation**

> This hook provides the mutation function to create the underlying model's data. It is helpful in subscribing to a topic or list of topics
The mutation is called only when there is no existing `tagSubscriptionId` for the given profile. If it exists, [useUpdateInterestsMutation](#useupdateinterestsmutation) should be used instead.

**Example usage**
```jsx
import { useCreateInterestsMutation } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const sdk = getSDK();
const [createInterests, { data, error, loading }] = useCreateInterestsMutation(
  {
    context: {
      source: sdk.services.gql.contextSources.composeDB
    },
  }
);

/**
 * use this mutation,
 * only when there is no tag subscription id.
*/
const tagSubscriptionId = null;

const handleCreateInterests = () => {
  if (!tagSubscriptionId) {
    createInterests({
    variables: {
      i: {
        content: {
          topics: [{
            value: 'akasha',
            labelType: sdk.services.gql.labelTypes.INTEREST
          },
          {
            value: 'world',
            labelType: sdk.services.gql.labelTypes.INTEREST
          }
          ]
        }
      }
    },
    onError,
    OnCompleted,
    ...
  }).then(
    // ...
  ).catch(
    // ...
  )
  }
}
```
_________
### useCreateProfileMutation
Create a profile with **useCreateProfileMutation**

> This hook provides the mutation function to create the underlying model's data. It is helpful in creating new user profiles upon authentication.

**Example usage**
```jsx
import { useCreateProfileMutation } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const sdk = getSDK();
const [createProfile, { data, error, loading }] = useCreateProfileMutation(
  {
    context: {
      source: sdk.services.gql.contextSources.composeDB
    },
  }
);

const handleCreateProfile = () => {
  createProfile({
    variables: {
      i: {
        content: {
          nsfw: false,
          name: 'New Profile',
          description: 'this is a new profile',
          links: [
            {
              href: 'http://sociallink1'
            },
            {
              href: 'http://sociallink2'
            }
          ],
          avatar: '', // new profile's avatar
          background: '', // new profile's cover image
          createdAt: new Date().toISOString(),
        }
      }
    },
    onError,
    OnCompleted,
    ...
  }).then(
    // ...
  ).catch(
    // ...
  )
}
```
_________
### useCreateReflectMutation
Create a reflection to a beam or a beam's reflection with **useCreateReflectMutation**

> This hook provides the mutation function to create the underlying model's data. It is helpful in creating a reflection to a beam or a beam's reflection.

**Example usage**
```jsx
import { useCreateReflectMutation } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const sdk = getSDK();
const [createReflection, { data, error, loading }] = useCreateReflectMutation(
  {
    context: {
      source: sdk.services.gql.contextSources.composeDB
    },
  }
);

const handleCreateReflection = () => {
  createReflection({
    variables: {
      i: {
        content: {
          active: true,
          beamId: 'beamId',
          content: [
            {
              label: 'label',
              propertyType: 'slate-block',
              value: 'encodedSlateContent'
            }
          ],
          reflection: 'reflectToId' // optional - used when reflecting to a reflection
          isReply: true // optional - used when reflecting to a reflection
          createdAt: new Date().toISOString(),
        }
      }
    },
    onError,
    OnCompleted,
    ...
  }).then(
    // ...
  ).catch(
    // ...
  )
}
```
_________
### useSetAppReleaseMutation
Create an application's release with **useSetAppReleaseMutation**

> This hook provides the mutation function to create the underlying model's data. It is helpful in creating a release linked to an application.

**Example usage**
```jsx
import { useSetAppReleaseMutation } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const sdk = getSDK();
const [setAppRelease, { data, error, loading }] = useSetAppReleaseMutation(
  {
    context: {
      source: sdk.services.gql.contextSources.composeDB
    },
  }
);

const handleSetAppRelease = () => {
  setAppRelease({
    variables: {
      i: {
        content: {
          applicationID: 'applicationId',
          version: '0.0.1',
          source:'http://someurl',
          meta: [
            {
              provider: 'Extensions App',
              property: 'description',
              value: 'some description',
            },
          ]
          createdAt: new Date().toISOString(),
        }
      }
    },
    onError,
    OnCompleted,
    ...
  }).then(
    // ...
  ).catch(
    // ...
  )
}
```
_________
### useUpdateAppMutation
Update an application with **useUpdateAppMutation**

> This hook provides the mutation function to update the underlying model's data. It is helpful in removing an application.

**Example usage**
```jsx
import { useUpdateAppMutation } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const sdk = getSDK();
const [updateApp, { data, error, loading }] = useUpdateAppMutation(
  {
    context: {
      source: sdk.services.gql.contextSources.composeDB
    },
  }
);

const handleRemoveApp = () => {
  // call the mutation function
  updateApp({
    variables: {
      i: {
        id: 'appId',
        content: {},
        options: {
          shouldIndex: false
        }
      }
    },
    onError,
    OnCompleted,
    ...
  }).then(resp => {
    // ...
  }).catch(err => {
    // ...
  })
}
```
_________
### useUpdateBeamMutation
Update a beam with **useUpdateBeamMutation**

> This hook provides the mutation function to update the underlying model's data. It is helpful in removing a beam.

**Example usage**
```jsx
import { useUpdateBeamMutation } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const sdk = getSDK();
const [updateBeam, { data, error, loading }] = useUpdateBeamMutation(
  {
    context: {
      source: sdk.services.gql.contextSources.composeDB
    },
  }
);

const handleRemoveBeam = () => {
  updateBeam({
    variables: {
      i: {
        id: 'beamId',
        content: {
          active: false
        },
        options: {
          shouldIndex: false
        }
      }
    },
    onError,
    OnCompleted,
    ...
  }).then(
    // ...
  ).catch(
    // ...
  )
}
```
_________
### useUpdateContentBlockMutation
Update a content block with **useUpdateContentBlockMutation**

> This hook provides the mutation function to update the underlying model's data. It is helpful in removing a content block.
_________
### useUpdateFollowMutation
Update a follow document to a profile with **useUpdateFollowMutation**

> This hook provides the mutation function to update the underlying model's data. It is helpful in updating a profile's followers or following data.
The mutation is called only when there is an existing follow document id for the profile. If it does not exist, [useCreateFollowMutation](#usecreatefollowmutation) should be used instead.

**Example usage**
```jsx
import { useUpdateFollowMutation } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const sdk = getSDK();
const [updateFollow, { data, error, loading }] = useUpdateFollowMutation(
  {
    context: {
      source: sdk.services.gql.contextSources.composeDB
    },
  }
);

/**
 * use this mutation,
 * only when there is a follow document id.
*/
const followId = 'followDocumentId';

const handleUpdateFollow = () => {
  if (followId) {
    updateFollow({
    variables: {
      i: {
        id: followId,
        content: {
          isFollowing: true, // set to false to unfollow a profile
        }
      }
    },
    onError,
    OnCompleted,
    ...
  }).then(
    // ...
  ).catch(
    // ...
  )
  }
}
```
_________
### useUpdateInterestsMutation
Update an interest or list of interests with **useUpdateInterestsMutation**

> This hook provides the mutation function to create the underlying model's data. It is helpful in unsubscribing to topic or list of topics
The mutation is called only when there is an existing `tagSubscriptionId` for the given profile. If it does not exist, [useCreateInterestsMutation](#usecreateinterestsmutation) should be used instead.

**Example usage**
```jsx
import { useUpdateInterestsMutation } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const sdk = getSDK();
const [updateInterests, { data, error, loading }] = useUpdateInterestsMutation(
  {
    context: {
      source: sdk.services.gql.contextSources.composeDB
    },
  }
);

/**
 * use this mutation,
 * only when there is a tag subscription id.
*/
const tagSubscriptionId = 'tagSubscriptionId';

const handleUpdateInterests = () => {
  if (tagSubscriptionId) {
    updateInterests({
    variables: {
      i: {
        id: tagSubscriptionId,
        content: {
          topics: [{
            value: 'akasha',
            labelType: sdk.services.gql.labelTypes.INTEREST
          },
          {
            value: 'world',
            labelType: sdk.services.gql.labelTypes.INTEREST
          }
          ]
        }
      }
    },
    onError,
    OnCompleted,
    ...
  }).then(
    // ...
  ).catch(
    // ...
  )
  }
}
```
_________
### useUpdateProfileMutation
Update a profile with **useUpdateProfileMutation**

> This hook provides the mutation function to update the underlying model's data. It is helpful in updating a user's profile.

**Example usage**
```jsx
import { useUpdateProfileMutation } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const sdk = getSDK();
const [updateProfile, { data, error, loading }] = useUpdateProfileMutation(
  {
    context: {
      source: sdk.services.gql.contextSources.composeDB
    },
  }
);

const handleUpdateProfile = () => {
  updateProfile({
    variables: {
      i: {
        id: 'profileId',
        content: {
          nsfw: false,
          name: 'Updated Profile',
          description: 'this profile is updated',
          links: [
            {
              href: 'http://sociallink10'
            },
            {
              href: 'http://sociallink20'
            }
          ],
          avatar: '', // new profile's avatar
          background: '', // new profile's cover image
        }
      }
    },
    onError,
    OnCompleted,
    ...
  }).then(
    // ...
  ).catch(
    // ...
  )
}
```
_________
### useUpdateAkashaReflectMutation
Update a reflection to a beam or a beam's reflection with **useUpdateAkashaReflectMutation**

> This hook provides the mutation function to create the underlying model's data. It is helpful in editing a reflection to a beam or a beam's reflection.

**Example usage**
```jsx
import { useUpdateAkashaReflectMutation } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const sdk = getSDK();
const [editReflection, { data, error, loading }] = useUpdateAkashaReflectMutation(
  {
    context: {
      source: sdk.services.gql.contextSources.composeDB
    },
  }
);

const handleEditReflection = () => {
  editReflection({
    variables: {
      i: {
        id: 'reflectionId',
        content: {
          // reflection content is immutable
        }
      }
    },
    onError,
    OnCompleted,
    ...
  }).then(
    // ...
  ).catch(
    // ...
  )
}
```
_________
### useUpdateAppReleaseMutation
Update an application's release with **useUpdateAppReleaseMutation**

> This hook provides the mutation function to create the underlying model's data. It is helpful in creating a release linked to an application.
_________
### useIndexBeamMutation
Index a beam with **useIndexBeamMutation**
_________
### useIndexContentBlockMutation
Index a content block with **useIndexBeamMutation**
_________
### useIndexProfileMutation
Index a profile with **useIndexBeamMutation**
_________
### useIndexReflectionMutation
Index a reflection with **useIndexBeamMutation**
_________
## Queries
Queries are often used to fetch data from the GraphQL API with no resulting changes to the underlying model's data.
When initializing a query hook, you can pass to it the required parameters specifying what aspects of the model's data you are interested in. Calling a query returns returns an object from Apollo Client that contains loading, error, and data properties that can be used on the UI.

:::info
@TODO: provide extra information about query variants like lazy query, suspense query, stream query
:::
_________
### useGetAppReleaseByIdQuery
Get an app release by id with **useGetAppReleaseByIdQuery**

> This hook provides the query function to get a specific app release using its id. It is useful in showing more info relating to a particular release of a given application

**Example usage**
```jsx
import { useGetAppReleaseByIdQuery } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';

const { data, loading, error } = useGetAppReleaseByIdQuery({
  variables: { id: 'releaseId' },
  fetchPolicy: 'cache-first', // use this to control caching and improve network requests 
  notifyOnNetworkStatusChange: true,
  // ...
});

const appReleaseData = useMemo(() => {
  if (data?.node && 'id' in data.node) {
    return data.node;
  }
  return null;
}, [data]);

// do something with 'appReleaseData'.
// For instance you can get the version like so;
const version = releaseData?.version

// you can use the 'loading' state to show a spinner
if (loading) {
  return <Spinner/>
}
```
_________
### useGetAppsQuery
Get a list of apps with **useGetAppsQuery**

> This hook provides the query function to get a list of applications. It is useful in showing a list of all apps available in a world.

**Example usage**
```jsx
import { useGetAppsQuery } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';

const { data, loading, error } = useGetAppsQuery({
  variables: {
    first: 1,
    filters: {
    // ...
    },
    sorting: {
    // ...
    },
  },
});
```
_________
### useGetAppsByIdQuery
Get a specific app from list of apps using its id with **useGetAppsByIdQuery**

> This hook provides the query function to get a specific app using its id from list of all available apps.

**Example usage**
```jsx
import { useGetAppsByIdQuery } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';

const { data, loading, error } = useGetAppsByIdQuery({
  variables: { id: 'extensionId' },
  fetchPolicy: 'cache-first', 
  notifyOnNetworkStatusChange: true,
  // ...
});

const extensionData = useMemo(() => {
  if (data?.node && 'id' in data.node) {
    return data.node;
  }
  return null;
}, [data]);

// do something with 'extensionData',
// For instance you can get the displayName like so;
const displayName = extensionData?.displayName

// you can use the 'loading' state to show a spinner
if (loading) {
  return <Spinner/>
}
```
_________
### useGetAppsByPublisherDidQuery
Get a list of apps using the indexing DID with **useGetAppsByPublisherDidQuery**

> This hook provides the query function to get a list of applications by a publisher/developer. It is useful in showing a list of all apps published by a developer.

**Example usage**
```jsx
import { useGetAppsByPublisherDidQuery } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const sdk = getSDK();

const { data, loading, error } = useGetAppsByPublisherDidQuery({
  variables: {
    id: sdk.current.services.gql.indexingDID,
    first: 1, // number of entries to be returned starting from the first. You may also change it to 'last' to start from the last entry.
    filters: {
    // ...
    }, // use filter to specify specific aspects to be included in the returned data
    sorting: {
    // ...
    }, // specify the order in which the data is arranged or presented
  },
});
```
_________
### useGetAppsReleasesByPublisherDidQuery
_________
### useGetAppsReleasesQuery
Get a list of apps releases with **useGetAppsReleasesQuery**

> This hook provides the query function to get a list of applications releases. It is useful in showing a list of releases for a specific app.

**Example usage**
```jsx
import { useGetAppsReleasesQuery } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';

const { data, loading, error } = useGetAppsReleasesQuery({
  variables: {
    first: 10,
    filters: { where: { applicationID: { equalTo: 'extensionId' } } }, // specify an extensionId to filter only releases for the particular app
    sorting: { createdAt: 'DESC' }
  },
  fetchPolicy: 'cache-first',
  notifyOnNetworkStatusChange: true,
});
```
_________
### useGetAppsStreamQuery
Get a list of apps with **useGetAppsStreamQuery**

> provide extra info

**Example usage**
```jsx
import { useGetAppsStreamQuery } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const sdk = getSDK();

const { data, loading, error } = useGetAppsStreamQuery({
  variables: {
    indexer: sdk.current.services.gql.indexingDID,
    first: 1,
    filters: {
    // ...
    },
  },
});
```
_________
### useGetBeamByIdQuery
_________
### useGetBeamStreamQuery
_________
### useGetBeamsByAuthorDidQuery
