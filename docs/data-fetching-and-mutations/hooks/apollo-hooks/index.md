# Apollo Hooks
This section provides in-depth information on the hooks for Apollo mutations and queries automatically generated by the GraphQL CodeGen tool.

## Mutations
Mutations are often used to interact with the GraphQL API resulting to changes (creating / updating) to the underlying model's data.

:::info
When initializing a mutation hook, it is important to pass to it a `context` which provides a different network endpoint needed by the mutations
:::

Calling a mutation returns a tuple that includes:
- A `mutate` function that you can call at any time to execute the mutation.
- An object with fields that represent the current status of the mutation's execution.

_________

### useCreateAppMutation
Create an application with **useCreateAppMutation**

> This hook provides the mutation function to create the underlying model's data. It is helpful in creating robust applications.

**Example usage**
```jsx
import { useCreateAppMutation } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const sdk = getSDK();
const [createApp, { data, error, loading }] = useCreateAppMutation(
  {
    context: {
      source: sdk.services.gql.contextSources.composeDB
    },
  }
);

const handleCreateApp = () => {
  // call the mutation function
  createApp({
    variables: {
      i: {
        content: {
          name: 'appId',
          license: 'License',
          applicationType: 'APP',
          displayName: 'AmazingApp',
          description: 'this is an amazing app',
          createdAt: new Date().toISOString(),
        }
      }
    },
    onError, // fn to be called if the mutation fails
    OnCompleted, // fn to be called when the mutation completes execution
    ...
  }).then(resp => {
    // handle response data here
  }).catch(err => {
    // handle error message here
  })
}
```
_________
### useCreateBeamMutation
Create a beam with **useCreateBeamMutation**

> This hook provides the mutation function to create the underlying model's data. It is helpful in creating beams during the blocks publishing process of the editor. These beams can then be viewed in an antenna app or any other list app curating beams.

**Example usage**
```jsx
import { useCreateBeamMutation } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const sdk = getSDK();
const [createBeam, { data, error, loading }] = useCreateBeamMutation(
  {
    context: {
      source: sdk.services.gql.contextSources.composeDB
    },
  }
);

const handleCreateBeam = () => {
  const tagLabelType = sdk.services.gql.labelTypes.TAG;
  createBeam({
    variables: {
      i: {
        content: {
          nsfw: false,
          active: true,
          content: [
            {
              blockID: 'blockID',
              order: 1
            }
          ],
          tags: [
            {
              labelType: tagLabelType
              value: 'akasha'
            },
            {
              labelType: tagLabelType
              value: 'world'
            },
          ],
          createdAt: new Date().toISOString(),
        }
      }
    },
    onError,
    OnCompleted,
    ...
  }).then(
    // ...
  ).catch(
    // ...
  )
}
```
_________
### useCreateContentBlockMutation
Create a [content block](../../../extensions/editor/content_blocks.md) with **useCreateContentBlockMutation**

> This hook provides the mutation function to create the underlying model's data. It is helpful in creating content blocks during the blocks publishing process of the editor.

**Example usage**
```jsx
import { useCreateContentBlockMutation } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const [createContentBlock, { data, error, loading }] = useCreateContentBlockMutation(
  {
    context: {
      source: sdk.services.gql.contextSources.composeDB
    },
  }
);

const handleCreateContentBlock = () => {
  createContentBlock({
    variables: {
      i: {
        content: {
          nsfw: false,
          active: true,
          appVersionID: 'k2t6wzhkhabz3aut9p2mhjzp80hzo7bee18l1pt94syakfbfcj7phve27kiwwp',
          content: [{
            label: 'appName',
            propertyType: 'propertyType'
            value: 'content'
          }],
          kind: 'TEXT',
          createdAt: new Date().toISOString(),
        }
      }
    },
    onError,
    OnCompleted,
    ...
  }).then(
    // ...
  ).catch(
    // ...
  )
}
```
_________
### useCreateFollowMutation
Create a follow document to a profile with **useCreateFollowMutation**

> This hook provides the mutation function to create the underlying model's data. It is helpful in keeping track of a profile's followers or following data.
The mutation is called only when there is no existing follow document id for the profile. If it exists, [useUpdateFollowMutation](#useupdatefollowmutation) should be used instead.

**Example usage**
```jsx
import { useCreateFollowMutation } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const sdk = getSDK();
const [createFollow, { data, error, loading }] = useCreateFollowMutation(
  {
    context: {
      source: sdk.services.gql.contextSources.composeDB
    },
  }
);

/**
 * use this mutation,
 * only when there is no follow document id.
*/
const followId = null;

const handleCreateFollow = () => {
  if (!followId) {
    createFollow({
    variables: {
      i: {
        content: {
          isFollowing: true,
          profileID: 'did:pkh:eip155:11155111:0x2c953cd8d24004406570840a'
          createdAt: new Date().toISOString(),
        }
      }
    },
    onError,
    OnCompleted,
    ...
  }).then(
    // ...
  ).catch(
    // ...
  )
  }
}
```
_________
### useCreateInterestsMutation
Create an interest or list of interests with **useCreateInterestsMutation**

> This hook provides the mutation function to create the underlying model's data. It is helpful in subscribing to a topic or list of topics
The mutation is called only when there is no existing `tagSubscriptionId` for the given profile. If it exists, [useUpdateInterestsMutation](#useupdateinterestsmutation) should be used instead.

**Example usage**
```jsx
import { useCreateInterestsMutation } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const sdk = getSDK();
const [createInterests, { data, error, loading }] = useCreateInterestsMutation(
  {
    context: {
      source: sdk.services.gql.contextSources.composeDB
    },
  }
);

/**
 * use this mutation,
 * only when there is no tag subscription id.
*/
const tagSubscriptionId = null;

const handleCreateInterests = () => {
  if (!tagSubscriptionId) {
    createInterests({
    variables: {
      i: {
        content: {
          topics: [{
            value: 'akasha',
            labelType: sdk.services.gql.labelTypes.INTEREST
          },
          {
            value: 'world',
            labelType: sdk.services.gql.labelTypes.INTEREST
          }
          ]
        }
      }
    },
    onError,
    OnCompleted,
    ...
  }).then(
    // ...
  ).catch(
    // ...
  )
  }
}
```
_________
### useCreateProfileMutation
Create a profile with **useCreateProfileMutation**

> This hook provides the mutation function to create the underlying model's data. It is helpful in creating new user profiles upon authentication.

**Example usage**
```jsx
import { useCreateProfileMutation } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const sdk = getSDK();
const [createProfile, { data, error, loading }] = useCreateProfileMutation(
  {
    context: {
      source: sdk.services.gql.contextSources.composeDB
    },
  }
);

const handleCreateProfile = () => {
  createProfile({
    variables: {
      i: {
        content: {
          nsfw: false,
          name: 'New Profile',
          description: 'this is a new profile',
          links: [
            {
              href: 'http://sociallink1'
            },
            {
              href: 'http://sociallink2'
            }
          ],
          avatar: '', // new profile's avatar
          background: '', // new profile's cover image
          createdAt: new Date().toISOString(),
        }
      }
    },
    onError,
    OnCompleted,
    ...
  }).then(
    // ...
  ).catch(
    // ...
  )
}
```
_________
### useCreateReflectMutation
Create a reflection to a beam or a beam's reflection with **useCreateReflectMutation**

> This hook provides the mutation function to create the underlying model's data. It is helpful in creating a reflection to a beam or a beam's reflection.

**Example usage**
```jsx
import { useCreateReflectMutation } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const sdk = getSDK();
const [createReflection, { data, error, loading }] = useCreateReflectMutation(
  {
    context: {
      source: sdk.services.gql.contextSources.composeDB
    },
  }
);

const handleCreateReflection = () => {
  createReflection({
    variables: {
      i: {
        content: {
          active: true,
          beamId: 'beamId',
          content: [
            {
              label: 'label',
              propertyType: 'slate-block',
              value: 'encodedSlateContent'
            }
          ],
          reflection: 'reflectToId' // optional - used when reflecting to a reflection
          isReply: true // optional - used when reflecting to a reflection
          createdAt: new Date().toISOString(),
        }
      }
    },
    onError,
    OnCompleted,
    ...
  }).then(
    // ...
  ).catch(
    // ...
  )
}
```
_________
### useSetAppReleaseMutation
Create an application's release with **useSetAppReleaseMutation**

> This hook provides the mutation function to create the underlying model's data. It is helpful in creating a release linked to an application.

**Example usage**
```jsx
import { useSetAppReleaseMutation } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const sdk = getSDK();
const [setAppRelease, { data, error, loading }] = useSetAppReleaseMutation(
  {
    context: {
      source: sdk.services.gql.contextSources.composeDB
    },
  }
);

const handleSetAppRelease = () => {
  setAppRelease({
    variables: {
      i: {
        content: {
          applicationID: 'applicationId',
          version: '0.0.1',
          source:'http://someurl',
          meta: [
            {
              provider: 'Extensions App',
              property: 'description',
              value: 'some description',
            },
          ]
          createdAt: new Date().toISOString(),
        }
      }
    },
    onError,
    OnCompleted,
    ...
  }).then(
    // ...
  ).catch(
    // ...
  )
}
```
_________
### useUpdateAppMutation
Update an application with **useUpdateAppMutation**

> This hook provides the mutation function to update the underlying model's data. It is helpful in removing an application.

**Example usage**
```jsx
import { useUpdateAppMutation } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const sdk = getSDK();
const [updateApp, { data, error, loading }] = useUpdateAppMutation(
  {
    context: {
      source: sdk.services.gql.contextSources.composeDB
    },
  }
);

const handleRemoveApp = () => {
  // call the mutation function
  updateApp({
    variables: {
      i: {
        id: 'appId',
        content: {},
        options: {
          shouldIndex: false
        }
      }
    },
    onError,
    OnCompleted,
    ...
  }).then(resp => {
    // ...
  }).catch(err => {
    // ...
  })
}
```
_________
### useUpdateBeamMutation
Update a beam with **useUpdateBeamMutation**

> This hook provides the mutation function to update the underlying model's data. It is helpful in removing a beam.

**Example usage**
```jsx
import { useUpdateBeamMutation } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const sdk = getSDK();
const [updateBeam, { data, error, loading }] = useUpdateBeamMutation(
  {
    context: {
      source: sdk.services.gql.contextSources.composeDB
    },
  }
);

const handleRemoveBeam = () => {
  updateBeam({
    variables: {
      i: {
        id: 'beamId',
        content: {
          active: false
        },
        options: {
          shouldIndex: false
        }
      }
    },
    onError,
    OnCompleted,
    ...
  }).then(
    // ...
  ).catch(
    // ...
  )
}
```
_________
### useUpdateContentBlockMutation
Update a content block with **useUpdateContentBlockMutation**

> This hook provides the mutation function to update the underlying model's data. It is helpful in removing a content block.
_________
### useUpdateFollowMutation
Update a follow document to a profile with **useUpdateFollowMutation**

> This hook provides the mutation function to update the underlying model's data. It is helpful in updating a profile's followers or following data.
The mutation is called only when there is an existing follow document id for the profile. If it does not exist, [useCreateFollowMutation](#usecreatefollowmutation) should be used instead.

**Example usage**
```jsx
import { useUpdateFollowMutation } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const sdk = getSDK();
const [updateFollow, { data, error, loading }] = useUpdateFollowMutation(
  {
    context: {
      source: sdk.services.gql.contextSources.composeDB
    },
  }
);

/**
 * use this mutation,
 * only when there is a follow document id.
*/
const followId = 'followDocumentId';

const handleUpdateFollow = () => {
  if (followId) {
    updateFollow({
    variables: {
      i: {
        id: followId,
        content: {
          isFollowing: true, // set to false to unfollow a profile
        }
      }
    },
    onError,
    OnCompleted,
    ...
  }).then(
    // ...
  ).catch(
    // ...
  )
  }
}
```
_________
### useUpdateInterestsMutation
Update an interest or list of interests with **useUpdateInterestsMutation**

> This hook provides the mutation function to create the underlying model's data. It is helpful in unsubscribing to topic or list of topics
The mutation is called only when there is an existing `tagSubscriptionId` for the given profile. If it does not exist, [useCreateInterestsMutation](#usecreateinterestsmutation) should be used instead.

**Example usage**
```jsx
import { useUpdateInterestsMutation } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const sdk = getSDK();
const [updateInterests, { data, error, loading }] = useUpdateInterestsMutation(
  {
    context: {
      source: sdk.services.gql.contextSources.composeDB
    },
  }
);

/**
 * use this mutation,
 * only when there is a tag subscription id.
*/
const tagSubscriptionId = 'tagSubscriptionId';

const handleUpdateInterests = () => {
  if (tagSubscriptionId) {
    updateInterests({
    variables: {
      i: {
        id: tagSubscriptionId,
        content: {
          topics: [{
            value: 'akasha',
            labelType: sdk.services.gql.labelTypes.INTEREST
          },
          {
            value: 'world',
            labelType: sdk.services.gql.labelTypes.INTEREST
          }
          ]
        }
      }
    },
    onError,
    OnCompleted,
    ...
  }).then(
    // ...
  ).catch(
    // ...
  )
  }
}
```
_________
### useUpdateProfileMutation
Update a profile with **useUpdateProfileMutation**

> This hook provides the mutation function to update the underlying model's data. It is helpful in updating a user's profile.

**Example usage**
```jsx
import { useUpdateProfileMutation } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const sdk = getSDK();
const [updateProfile, { data, error, loading }] = useUpdateProfileMutation(
  {
    context: {
      source: sdk.services.gql.contextSources.composeDB
    },
  }
);

const handleUpdateProfile = () => {
  updateProfile({
    variables: {
      i: {
        id: 'profileId',
        content: {
          nsfw: false,
          name: 'Updated Profile',
          description: 'this profile is updated',
          links: [
            {
              href: 'http://sociallink10'
            },
            {
              href: 'http://sociallink20'
            }
          ],
          avatar: '', // new profile's avatar
          background: '', // new profile's cover image
        }
      }
    },
    onError,
    OnCompleted,
    ...
  }).then(
    // ...
  ).catch(
    // ...
  )
}
```
_________
### useUpdateAkashaReflectMutation
Update a reflection to a beam or a beam's reflection with **useUpdateAkashaReflectMutation**

> This hook provides the mutation function to create the underlying model's data. It is helpful in editing a reflection to a beam or a beam's reflection.

**Example usage**
```jsx
import { useUpdateAkashaReflectMutation } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const sdk = getSDK();
const [editReflection, { data, error, loading }] = useUpdateAkashaReflectMutation(
  {
    context: {
      source: sdk.services.gql.contextSources.composeDB
    },
  }
);

const handleEditReflection = () => {
  editReflection({
    variables: {
      i: {
        id: 'reflectionId',
        content: {
          // reflection content is immutable
        }
      }
    },
    onError,
    OnCompleted,
    ...
  }).then(
    // ...
  ).catch(
    // ...
  )
}
```
_________
### useUpdateAppReleaseMutation
Update an application's release with **useUpdateAppReleaseMutation**

> This hook provides the mutation function to create the underlying model's data. It is helpful in creating a release linked to an application.
_________
### useIndexBeamMutation
Index a beam with **useIndexBeamMutation**
_________
### useIndexContentBlockMutation
Index a content block with **useIndexBeamMutation**
_________
### useIndexProfileMutation
Index a profile with **useIndexBeamMutation**
_________
### useIndexReflectionMutation
Index a reflection with **useIndexBeamMutation**
_________
## Queries - (Standard)
Queries are used to fetch data from the GraphQL API with no resulting changes to the underlying model's data.
When initializing a query hook, you can pass to it the required parameters specifying what aspects of the model's data you are interested in. Calling a query returns returns an object from Apollo Client that contains loading, error, and data properties that can be used on the UI.

:::info
Queries could be either of `Standard` or`Stream` queries.
* `Standard` queries provide hooks to access data directly from the model
:::

### Type Predicates
Many of the fields returned from the graphql endpoints are optional or the field can be an empty object.
This means that typescript will complain if you want to access a field of an empty object.
To overcome this issue, and also maintain consistency in usage, the hooks package also contains a set of selectors that can be used as a basis for custom selectors or as an example to help you build your custom selectors and have the same consistency.

The selectors are split into multiple files which are named after the name of the hook it's compatible with.

For example, to get the selectors for a hook named `useGetBeamsByIdQuery` you will need import them from the file `get-beam-by-id-query` like this: 
```tsx
import { useGetBeamByIdQuery } from '@akashaorg/ui-core-hooks/lib/generated/apollo';
import { selectBeamId } from `@akashaorg/ui-core-hooks/lib/selectors/get-beam-by-id-query`;

// selectors operates directly on the hook's data object:

const {data, loading} = useGetBeamsByIdQuery({/*some vars*/});
const beamId = selectBeamId(data); // now typescript will correctly infer the beamId type

```
This will enhance the readability of the code and reduce field access errors that may occur if you forget to handle it.

:::info
  Tip: Keep the selectors as simple as possible and don't try to merge or to handle multiple data types in one selector
:::
_________
### useGetAppReleaseByIdQuery
Get an app release by id with **useGetAppReleaseByIdQuery**

> This hook provides the query function to get a specific app release using its id. It is useful in showing more info regarding a particular release of a given application.

**Example usage**
```jsx
import { useGetAppReleaseByIdQuery } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';

const { data, loading, error } = useGetAppReleaseByIdQuery({
  variables: { id: 'releaseId' },
  fetchPolicy: 'cache-first', // use this to control caching and improve network requests 
  notifyOnNetworkStatusChange: true,
  // ...
});

const appReleaseData = useMemo(() => {
  if (data?.node && 'id' in data.node) {
    return data.node;
  }
  return null;
}, [data]);

// do something with 'appReleaseData'.
// For example, you can get the version like so;
const version = releaseData?.version

// the 'loading' state can be used to render a spinner;
if (loading) {
  return <Spinner/>
}
```
_________
### useGetAppsQuery
Get a list of apps with **useGetAppsQuery**

> This hook provides the query function to get a list of applications. It is useful in showing a list of all apps available in a world.

**Example usage**
```jsx
import { useGetAppsQuery } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';

const { data, loading, error } = useGetAppsQuery({
  variables: {
    first: 1,
    filters: {
    // ...
    }, // specify aspects to be included in the returned data
    sorting: {
    // ...
    }, // specify the order in which the data is arranged or presented
  },
});
```
_________
### useGetAppsByIdQuery
Get a specific app from list of apps using its id with **useGetAppsByIdQuery**

> This hook provides the query function to get a specific app using its id from list of all available apps.

**Example usage**
```jsx
import { useGetAppsByIdQuery } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';

const { data, loading, error } = useGetAppsByIdQuery({
  variables: { id: 'id of the application' },
  fetchPolicy: 'cache-first', 
  notifyOnNetworkStatusChange: true,
  // ...
});

const extensionData = useMemo(() => {
  if (data?.node && 'id' in data.node) {
    return data.node;
  }
  return null;
}, [data]);

// do something with 'extensionData',
// For instance you can get the displayName like so;
const displayName = extensionData?.displayName

// you can use the 'loading' state to show a spinner
if (loading) {
  return <Spinner/>
}
```
_________
### useGetAppsByPublisherDidQuery
Get a list of apps using the publisher's DID with **useGetAppsByPublisherDidQuery**

> This hook provides the query function to get a list of applications by a publisher/developer. It is useful in showing a list of all apps published by a specific developer.

**Example usage**
```jsx
import { useGetAppsByPublisherDidQuery } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const sdk = getSDK();

const { data, loading, error } = useGetAppsByPublisherDidQuery({
  variables: {
    id: sdk.services.gql.indexingDID,
    first: 1, // number of entries to be returned starting from the first. You may also change it to 'last' to start from the last entry.
    filters: {
    // ...
    },
    sorting: {
    // ...
    },
  },
});
```
_________
### useGetAppsReleasesByPublisherDidQuery
_________
### useGetAppsReleasesQuery
Get a list of apps releases with **useGetAppsReleasesQuery**

> This hook provides the query function to get a list of applications releases. It is useful in showing a list of releases for a specific app.

**Example usage**
```jsx
import { useGetAppsReleasesQuery } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';

const { data, loading, error } = useGetAppsReleasesQuery({
  variables: {
    first: 10,
    filters: { where: { applicationID: { equalTo: 'id of the application' } } }, // specify an application id to filter only releases for the particular app
    sorting: { createdAt: 'DESC' }
  },
  fetchPolicy: 'cache-first',
  notifyOnNetworkStatusChange: true,
});
```
_________
### useGetBeamsQuery

A generated hook for querying a paginated list of "Beams" (posts) with optional filtering and sorting.

- Pagination uses Relay-style cursor pagination
- Returns a query object having the standard Apollo useQuery shape (`data`, `loading`, `error`, and helper methods like `fetchMore`)

#### Required query variables (Only one of the following params)
- first - number - Number of items (nodes) to fetch from the beginning of the list
- last - number - Number of items (nodes) to fetch from the back of the list

#### Optional query variables
- filters - `AkashaBeamFiltersInput` - Optional filters to apply to the query
- sorting - `AkashaBeamSortingInput` - Optional sorting to apply to a query
- after - string - Cursor for pagination (returns nodes after this id)
- before - string - Cursor for pagination (returns nodes vefore this id)

#### Returned data object
If the query is successful, the `data` object will contain
- `data.akashaBeamIndex` - an array of Beam nodes
- `data.pageInfo` - pagination data

**Example Usage**
```tsx
import { useGetBeamsQuery } from '@akashaorg/ui-core-hooks/lib/generated/apollo';


const BeamList = () => {
  const { data, loading, error, fetchMore } = useGetBeamsQuery({
    variables: {
      // Fetches first 10 beams
      first: 10,
      // NOTE: SortOrder enum should be imported from `@akashaorg/typings/lib/sdk/graphql-operation-types-new`
      sorting: { createdAt: SortOrder.DESC} } 
    }
  });

  if (loading) return <div>Loading...</div>;
  if (error) return <div>Error: {error.message}</div>;

  const beams = data?.akashaBeamIndex?.edges || [];

  return (
    <div>
      {beams.map((edge) => (
        <div key={edge?.node?.id}>
          <h2>{edge?.node?.content[0]?.blockID}</h2>
          <p>Author: {edge?.node?.author.id}</p>
        </div>
      ))}

      {/* Pagination example */}
      <button
        onClick={() => fetchMore({ variables: { after: data.akashaBeamIndex?.pageInfo.endCursor } })}
      >
        Load More
      </button>
    </div>
  );
};
```
_________
### useGetBeamByIdQuery

Get a specific beam from list of beams using its id with **useGetBeamByIdQuery**

> This hook provides the query function to get a specific beam using its id from list of all beams.

**Example usage**
```jsx
import { useGetBeamByIdQuery } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';

const beamId = 'id of the beam'

const { data, loading, error } = useGetBeamByIdQuery({
  variables: { id: beamId },
  skip: !beamId, // this hook will not execute when beamId is not defined
  // ...
});

// we can check if a beam is active like so;
const isBeamActive = useMemo(() => {
  if (data?.node && 'active' in data.node) {
    return data.node.active;
  }
  return null;
}, [data]);
```
:::info
It is important to check and compare received data fields against [useGetBeamStreamQuery](#usegetbeamstreamquery) which has the current indexed version of the beam.
:::
_________
### useGetContentBlockByIdQuery

Get a specific content-block by its id. 

> A Beam (post) in AKASHA Core is composed from a list of content-blocks (learn more in the content-blocks section of the documentation)

#### Query Variables (Required):
  - id - string - the id of the content block (usually obtained from a beam query)

#### Returned data object
If the query is successful, the `data` object will contain
  - `data.node` - Content block details

**Example Usage**
```tsx
import { useGetContentBlockByIdQuery } from '@akashaorg/ui-core-hooks/lib/generated/apollo';

const MyComponent = () => {
  const {} = useGetContentBlockByIdQuery({
    variables: {
      id: 'some-content-block-id'
    }
  });

  if (loading) return <div>Loading...</div>;
  if (error) return <div>Error! {error.message}</div>;

  const contentBlock = data?.node;
  
  if (!contentBlock || 'id' in contentBlock === false) {
    return <div>Block not found</div>;
  }

  return (
    <div>{contentBlock.author.id}</div>
  )
}

```
_________
### useGetBlockStorageByIdQuery
A hook to get the block storage of a content-block. 

### Required Query Variables
- id: string - content block's id

:::info
  Content block storage functionality is not being used at the moment.
:::



### useGetFollowDocumentsByDidQuery

Get the list of follow relationship documents between the `id` and the `following` field DIDs. Used to check if a user's profile DID follows another's.
This hook is used to determine if there is already a document created expressing the relationship and if the result is null (or empty) then the follow document should be created first using [useCreateFollowMutation](#usecreatefollowmutation). If the document is already created then it can be updated using [useUpdateFollowMutation](#useupdatefollowmutation).


#### Required Query Variables
- id: string - DID of the user you want to query
- following: string[] - list of DIDs to check against

#### Optional Query Variables
- first: string
- last: string


**Example Usage**
```tsx
import { useGetFollowDocumentsByDidQuery } from '@akashaorg/ui-core-hooks/lib/generated/apollo';


const MyComponent = () => {
  const { data, error } = useGetFollowDocumentsByDidQuery({
    fetchPolicy: 'cache-and-network',
    variables: {
      id: 'did-of-the-logged-in-profile',
      following: ['other-profile-did'],
      last: 1,
    },
  });

  if (data?.node?.akashaFollowList?.edges[0].node.isFollowing) {
    return (
      <div>Already Following</div>
      <button onClick={updateFollow}>Unfollow</button>
    )
  }
  return (
    <div>
      Never followed before
      <button onClick={createFollow}></button>
    </div>
  )
}

```
_________
### useGetFollowersListByDidQuery

A generated hook to get a paginated list of followers for a specific profile DID

#### Required Query Variables
- id: string - DID of the user you want to query
- first: string - number of elements to include from the start of the list
- last: string - number of elements to include from the end of the list

> You need to include either `first` or `last` variables in your query but not both

#### Optional Query Variables
- after: string - pagination cursor (returns elements after this DID)
- before: string - pagination cursor (returns elements before this DID)

**Example usage**

```tsx
import { useGetFollowersListByDidQuery } from '@akashaorg/ui-core-hooks/lib/generated/apollo';

const FollowersPaginatedList = ({profileDID, isLoggedIn}) => {
  const { data, loading, error, fetchMore } = useGetFollowersListByDidQuery({
    fetchPolicy: 'cache-first',
    variables: {
      id: profileDID,
      first: 10,
    },
    skip: !isLoggedIn,
    notifyOnNetworkStatusChange: true,
  });
  if (loading) return <div>Loading...</div>;
  if (error) return <div>Error loading data</div>;
  return (
    <div>
      {data.node.akashaProfile?.followers?.edges.map(followEdge => {
        // to get the profile data, 
        // use useGetProfileByIdQuery passing the 
        // akashaProfile.id from below
        return (
          <div key={followEdge.node?.did?.akashaProfile?.id}>
            {followEdge.node?.did?.akashaProfile?.id}
          </div>
        )
      })}
      <button onClick={() => 
        fetchMore({ 
          variables: {
            after: data.node.akashaProfile?.followers?.pageInfo.endCursor
          } 
        })}>Load More</button>
    </div>
  );
}
```
_________

### useGetFollowingListByDidQuery

A generated hook to get a paginated list of profiles that a specific DID follows

#### Required Query Variables
- id: string - DID of the profile to get following list from
- first: number - number of elements to fetch from start
- last: number - number of elements to fetch from end

> Note: Use either first or last, not both simultaneously

#### Optional Query Variables
- after: string - pagination cursor for next page
- before: string - pagination cursor for previous page

**Example usage**

```tsx
import { useGetFollowingListByDidQuery } from '@akashaorg/ui-core-hooks/lib/generated/apollo';

const FollowingList = ({ profileDID }) => {
  const { data, loading, error, fetchMore } = useGetFollowingListByDidQuery({
    variables: {
      id: profileDID,
      first: 10,
    },
    fetchPolicy: 'cache-first',
  });

  if (loading) return <div>Loading...</div>;
  if (error) return <div>Error loading following list</div>;

  return (
    <div>
      {data?.node?.akashaProfile?.following?.edges.map(edge => (
        <div key={edge.node?.did?.akashaProfile?.id}>
          {edge.node?.did?.akashaProfile?.name}
        </div>
      ))}
      
      {data?.node?.akashaProfile?.following?.pageInfo.hasNextPage && (
        <button 
          onClick={() => 
            fetchMore({
              variables: {
                after: data.node.akashaProfile?.following?.pageInfo.endCursor
              }
            })
          }
        >
          Load More
        </button>
      )}
    </div>
  );
};
```
_________

### useGetInterestsByDidQuery
Fetch the interests (tags) a specific DID is subscribed to.

#### Required Query Variables
- id: string - DID of the profile to get insterests for.

**Example usage**

```tsx
import { useGetInterestsByDidQuery } from '@akashaorg/ui-core-hooks/lib/generated/apollo';

const InterestsList = ({ profileDID }) => {
  const { data, loading, error } = useGetInterestsByDidQuery({
    variables: {
      id: profileDID,
    },
    fetchPolicy: 'cache-first',
  });

  if (loading) return <div>Loading...</div>;
  if (error) return <div>Error loading interests</div>;

  return (
    <div>
      {data?.node?.akashaProfile?.interests?.map(interest => (
        <div key={interest.id}>
          {interest.label}
        </div>
      ))}
    </div>
  );
};
```

### useGetBeamsByAuthorDidQuery
_________
### useGetInterestsByIdQuery
_________
### useGetInterestsQuery
_________
### useGetMyProfileQuery
_________
### useGetProfileByDidQuery
Get a profile using its DID with **useGetProfileByDidQuery**

> This hook provides the query function to get a profile using its decentralized ID (DID). It is useful in showing thr details for a single profile.

**Example usage**
```jsx
import { useGetProfileByDidQuery } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';

const profileDID = 'DID of the profile being queried'
const authenticatedDID = 'DID of the currently authenticated profile'

const { data, loading, error } = useGetProfileByDidQuery({
  variables: {
    id: profileDID,
  },
  fetchPolicy: 'cache-first',
  skip: authenticatedDID !== profileDID
})
```
_________
### useGetProfileByIdQuery
Get a profile using its id with **useGetProfileByIdQuery**

> This hook provides the query function to get a profile using its id. It is useful in showing thr details for a single profile.

**Example usage**
```jsx
import { useGetProfileByIdQuery } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';

const profileID = 'id of the profile being queried'

const { data, loading, error } = useGetProfileByIdQuery({
  variables: {
    id: profileID,
  },
});
```
_________
### useGetProfileStatsByDidQuery
_________
### useGetProfilesQuery
_________
### useGetReflectReflectionsQuery
Get list of reflections to a specific reflection with **useGetReflectReflectionsQuery**

> This hook provides the query function to fetch reflections of a given reflection.

**Example usage**
```jsx
import { useGetReflectReflectionsQuery } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';

const reflectionId = 'id of the reflection'

const { data, loading, error } = useGetReflectReflectionsQuery({
  variables: {
    id: reflectionId,
    first: 5 // number of reflections to be returned in the data
  },
  // ...
});

// the reflections can be read from the data like so;
const reflections = data?.akashaReflectIndex?.edges
```
_________
### useGetReflectionByIdQuery
Get a specific reflection from list of reflections using its id with **useGetReflectionByIdQuery**

> This hook provides the query function to get a specific reflection using its id from list of all reflections.

**Example usage**
```jsx
import { useGetReflectionByIdQuery } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';

const reflectionId = 'id of the reflection'

const { data, loading, error } = useGetReflectionByIdQuery({
  variables: { id: reflectionId },
  skip: !reflectionId, // this hook will not execute when reflectionId is not defined
  // ...
});
```
_________
### useGetReflectionsByAuthorDidQuery
_________
### useGetReflectionsFromBeamQuery
_________
## Queries - (Indexed Streams)

In order to avoid hitting the ceramic node for every query, to speed up the query execution and enable advanced filtering capabilites some hooks have a `StreamQuery` version. Since this is a different service, provided by AKASHA, these hooks require an extra field called `indexer`. The functionality of hooks with the `StreamQuery` suffix is almost identical to the non suffixed counterparts.

You can identify if a hook has an indexed version by trying to import it from the `@akashaorg/ui-core-hooks/lib/generated/apollo` package.

Example 
- `useGetAppsQuery` => `useGetAppsStreamQuery`
- `useGetContentBlockQuery` => `useGetContentBlockStreamQuery`


:::info
* `StreamQuery` suffixed hooks provides access to data from the indexing service. For this reason, sometimes it may exhibit a delay between the data that is already in the Ceramic node and the indexing service. This delay should not be noticeable by the end user but it may require additional logic when doing a mutation and expecting the data to be immediately available.
:::

### useGetIndexedStreamQuery
A hook that supports advanced querying capabilities through the filtering field. One of the main usecases at the moment is to query the beams published using a specific tag.

#### Required Query Variables
- indexer: string - the indexing service to use (ex: sdk.services.gql.indexingDID)
- first: string - number of items from the start of the list
- last: string - number of items from the end of the list
- filters: [AkashaIndexedStreamFiltersInput](https://github.com/AKASHAorg/akasha-core/blob/next/libs/typings/src/sdk/graphql-types-new.ts) - filters to apply to the query

#### Optional Query Variables
- sorting: object - sorting to be aplied to the elements

:::info
  There are only a few use-cases in which this hook is needed. In general we prefer to use more specific hooks.
:::

**Example usage**

```tsx
import getSDK from '@akashaorg/awf-sdk';
import { AkashaIndexedStreamStreamType } from '@akashaorg/typings/lib/sdk/graphql-types-new';
import {useGetIndexedStreamQuery} from '@akashaorg/ui-core-hooks/lib/generated/apollo';

const BeamListForTag = ({tagName}) => {
  const { data, loading, error } = useGetIndexedStreamQuery({
    variables: {
      indexer: getSDK().services.gql.indexingDID
      first: 10,
      filters: {
        and: [
          { where: { streamType: { equalTo: AkashaIndexedStreamStreamType.Beam }}},
          { where: { indexType: { equalTo: temp1.services.gql.labelTypes.TAG }}},
          { where: { indexValue: { equalTo: 'akasha' }}}
        ]
      }
    }
  });

  const beamIds = data.node.akashaIndexedStreamList.edges.map(edge => edge.node.stream);
  
  // now we can use beamIds to get the beam data for each of the beams it contains
  // using useGetBeamStreamQuery or useGetBeamQuery

  return (
    <div>
      <h3>Beam Ids containing the akasha tag:</h3>
      { beamIds.map(beamId => <div key={beamId}>{beamId}</div>) }
    </div>
  );
}

```
_________

### useGetIndexedStreamCountQuery
A hook that supports advanced querying capabilities through `filters` field that returns the number of elements that matches the query. Useful when you want to show how many items are matching the queries, without having to get the entire data.

#### Required Query Variables
- indexer: string - the indexing service to use (ex: sdk.services.gql.indexingDID)
- filters: [AkashaIndexedStreamFiltersInput](https://github.com/AKASHAorg/akasha-core/blob/next/libs/typings/src/sdk/graphql-types-new.ts) - filters to apply to the query

**Example usage**
```tsx
import getSDK from '@akashaorg/awf-sdk';
import { AkashaIndexedStreamStreamType } from '@akashaorg/typings/lib/sdk/graphql-types-new';
import {useGetIndexedStreamCountQuery} from '@akashaorg/ui-core-hooks/lib/generated/apollo';

const BeamListForTag = ({tagName}) => {
  const { data, loading, error } = useGetIndexedStreamCountQuery({
    variables: {
      indexer: getSDK().services.gql.indexingDID
      filters: {
        and: [
          { where: { streamType: { equalTo: AkashaIndexedStreamStreamType.Beam }}},
          { where: { indexType: { equalTo: temp1.services.gql.labelTypes.TAG }}},
          { where: { indexValue: { equalTo: 'akasha' }}}
        ]
      }
    }
  });

  return (
    <div>
      <div>akasha tag has {data.node?.akashaIndexedStreamListCount} beams</div>
    </div>
  );
}

```


### useGetAppsStreamQuery
Get a list of apps from the indexing service with **useGetAppsStreamQuery**

> Using the filters param, this hook can be used to read the most recently indexed version of an application from list of all apps.

**Example usage**
```jsx
import { useGetAppsStreamQuery } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const sdk = getSDK();

const { data, loading, error } = useGetAppsStreamQuery({
  variables: {
    indexer: sdk.services.gql.indexingDID,
    first: 1,
    filters: {
      where: {
        applicationID: {
          equalTo: 'id of the application',
        }
      }
    },
  },
});
```
_________
### useGetBeamStreamQuery
Get a list of beams from the indexing service with **useGetBeamStreamQuery**

> Using the filters param, this hook can be used to read the most recently indexed version of a beam from list of all beams.

**Example usage**
```jsx
import { useGetBeamStreamQuery } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const sdk = getSDK();

const { data, loading, error } = useGetBeamStreamQuery({
  variables: {
    indexer: sdk.services.gql.indexingDID,
    filters: {
      where: {
        beamID: {
          equalTo: 'id of the beam',
        }
      }
    },
    last: 1,
  },
});
```
_________
### useGetInterestsStreamQuery
Get a list of interests from the indexing service with **useGetInterestsStreamQuery**

> Using the filters param, this hook can be used to read the most recently indexed version of an interest from list of all interests.

**Example usage**
```jsx
import { useGetInterestsStreamQuery } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const sdk = getSDK();

const { data, loading, error } = useGetInterestsStreamQuery({
  variables: {
    indexer: sdk.services.gql.indexingDID,
    filters: {
      where: {
        interestID: {
          equalTo: 'id of the interest',
        }
      }
    },
    last: 1,
  },
});
```
_________
### useGetProfileStreamQuery
Get a list of profiles from the indexing service with **useGetProfileStreamQuery**

> Using the filters param, this hook can be used to read the most recently indexed version of a profile from list of all profiles.

**Example usage**
```jsx
import { useGetProfileStreamQuery } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const sdk = getSDK();

const { data, loading, error } = useGetProfileStreamQuery({
  variables: {
    indexer: sdk.services.gql.indexingDID,
    filters: {
      where: {
        profileID: {
          equalTo: 'id of the profile',
        }
      }
    },
    last: 1,
  },
});
```
_________
### useGetReflectionStreamQuery
Get a list of reflections from the indexing service with **useGetReflectionStreamQuery**

> Using the filters param, this hook can be used to read the most recently indexed version of a reflection from list of all reflections.

**Example usage**
```jsx
import { useGetReflectionStreamQuery } from  '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const sdk = getSDK();

const { data, loading, error } = useGetReflectionStreamQuery({
  variables: {
    indexer: sdk.services.gql.indexingDID,
    filters: {
      where: {
        reflectionID: {
          equalTo: 'id of the reflection',
        }
      }
    },
    last: 1,
  },
});
```
_________

### useGetContentBlockStreamQuery
A generated hook to get a paginated list of content-blocks.

#### Required Query Variables
- indexer: string - the indexing service to use (ex: sdk.services.gql.indexingDID)
- first: number - number of items to return from the start of the list
- last: number - number of items to return from the end of the list

#### Optional Query Variables
- filter: object - filtering to be applied to the query
- sorting: object - sorting to be applied to the query

:::info
  A beam can contain 1 or more content-blocks. This hook only returns content-block's id which should be used with [useGetContentBlockByIdQuery](#usegetcontentblockbyidquery) hook to get the actual block data
:::

**Example usage**
```tsx
import { useGetContentBlockStreamQuery } from '@akashaorg/ui-core-hooks/lib/generated/apollo';
import getSDK from '@akashaorg/awf-sdk';

const ContentBlockList = () => {
  const { data, loading, error, fetchMore } = useGetContentBlockStreamQuery({
    variables: {
      indexer: getSDK().services.gql.indexingDID,
      first: 10,
    }
  });

  const blockIds = data.node?.akashaContentBlockStreamList?.edges?.map(edge => edge.node.blockID)
  
  // now we can use the blockIds to fetch the content-block's data using
  // useGetContentBlockByIdQuery hook

  return (
    <div>
      <h3>Latest content blocks</h3>
      {blockIds.map(id => <div key={id}>{id}</div>)}
    </div>
  )
}
```
_________